<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="ticker.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body class="">
    <div class="trick-page">
        <div class="header">
            <div class="left">
                <h2>HOLDINFO</h2>
            </div>
            <div class="center">
                <div class="dropdown">
                    <button class=" btn-color dropdown-toggle" type="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        INR
                    </button>
                    <ul class="dropdown-menu">
                        <li><button class="dropdown-item" type="button">Action</button></li>
                        <li><button class="dropdown-item" type="button">Another action</button></li>
                        <li><button class="dropdown-item" type="button">Something else here</button></li>
                    </ul>
                </div>
                <div class="dropdown">
                    <button class=" btn-color dropdown-toggle" type="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        BTC
                    </button>
                    <ul class="dropdown-menu">
                        <li><a value="BTC" tabindex="0" role="menuitem" class="dropdown-item" href="/BTC-INR">BTC</a>
                        </li>
                        <li><a value="ETH" tabindex="0" role="menuitem" class="dropdown-item" href="/ETH-INR">ETH</a>
                        </li>
                        <li><a value="USDT" tabindex="0" role="menuitem" class="dropdown-item" href="/USDT-INR">USDT</a>
                        </li>
                        <li><a value="XRP" tabindex="0" role="menuitem" class="dropdown-item" href="/xRP-INR">XRP</a>
                        </li>
                        <li><a value="TRX" tabindex="0" role="menuitem" class="dropdown-item" href="/TRX-INR">TRX</a>
                        </li>
                        <li><a value="DASH" tabindex="0" role="menuitem" class="dropdown-item" href="/DASH-INR">DASH</a>
                        </li>
                        <li> <a value="ZEC" tabindex="0" role="menuitem" class="dropdown-item" href="/ZEC-INR">ZEC</a>
                        </li>
                        <li> <a value="XEM" tabindex="0" role="menuitem" class="dropdown-item" href="/XEM-INR">XEM</a>
                        </li>
                        <li>
                            <a value="IOST" tabindex="0" role="menuitem" class="dropdown-item" href="/IOST-INR">IOST</a>
                        </li>
                        <li><a value="WIN" tabindex="0" role="menuitem" class="dropdown-item" href="/WIN-INR">WIN</a>
                        </li>
                        <li><a value="BTT" tabindex="0" role="menuitem" class="dropdown-item" href="/BTT-INR">BTT</a>
                        </li>
                        <li><a value="WRX" tabindex="0" role="menuitem" class="dropdown-item" href="/WRX-INR">WRX</a>
                        </li>

                    </ul>
                </div>
                <a target="_blank"
                    href="https://wazirx.com/invite/sp7pvbt6?utm_source=finstreet&amp;utm_medium=affiliate&amp;utm_campaign=regnow-btn"
                    type="button" aria-haspopup="true" aria-expanded="false" class="header-button btn-color ">BUY
                    BTC</a>

            </div>
            <div class="right">
                <!-- -----progress bar------ -->
                <div class="progress-bar-wrapper">
                    <svg class="CircularProgressbar" viewBox="0 0 100 100" data-test-id="CircularProgressbar">
                        <path class="CircularProgressbar-trail"
                            d="M 50,50 m 0,-46 a 46,46 0 1 1 0,92 a 46,46 0 1 1 0,-92" stroke-width="8" fill-opacity="0"
                            style="stroke-dasharray: 289.027px, 289.027px; stroke-dashoffset: 0px;"></path>
                        <path class="CircularProgressbar-path"
                            d="M 50,50 m 0,-46 a 46,46 0 1 1 0,92 a 46,46 0 1 1 0,-92" stroke-width="8" fill-opacity="0"
                            style="stroke-dasharray: 289.027px, 289.027px; stroke-dashoffset: 139.696px;"></path>
                        <text class="CircularProgress-text" x="50" y="50" id="count">3</text>
                    </svg>
                </div>
                <!-- -----telegram join button------ -->
                <button type="button" class="telegram-btn">
                    <i class="fa-solid fa-paper-plane"></i> Connect Telegram</button>
                <!-- -----theme toggler------ -->
                <input type="checkbox" id="switch" /><label for="switch" id="theme-toggler">Toggle</label>

            </div>
        </div>
        <h1 class="main-heading">Best price to trade</h1>
        <div class="percentages">
            <div>
                <h2>0.43%</h2>
                <p>5 mins</p>
            </div>
            <div>
                <h2>0.95%</h2>
                <p>1 hours</p>
            </div>
            <div class="amount">
                <h1>₹<b>35,56,209</b></h1>
                <span>Average BTC/INR net price including commission</span>
            </div>
            <div>
                <h2>5.59%</h2>
                <p>1 day</p>
            </div>
            <div>
                <h2>7.98%</h2>
                <p>7 days</p>
            </div>
        </div>
        <div class="table-responsive">
            <table>
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Platform</th>
                        <th>Last Traded Price</th>
                        <th>Buy / Sell Price</th>
                        <th>Volume</th>
                        <th>Base-Unit</th>
                    </tr>
                </thead>
                <tbody id="tickerDataBody">
                    <!-- Add your data rows here -->

                    <!-- Add more rows as needed -->
                </tbody>
            </table>
        </div>
    </div>
    <div class="footer">
        <p>Copyright ©️ 2019 HoldInfo.com</p>
        <p>Support</p>
    </div>
    <div class="d-flex justify-content-center"
        style="border:solid 1px #191d28;background-color:#191d28;position:fixed;left:0;align-items:center;width:100vw;height:47px;bottom:0;z-index:8">
        <button class="add-button btn btn-outline-info" style="display: block;">Add hodlinfo to home screen</button>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <script>

        let themeToggler = document.querySelector("#theme-toggler");
        let switchCheckbox = document.getElementById("switch");

        themeToggler.onclick = () => {
            if (!switchCheckbox.checked) {
                document.body.classList.add('active');
            } else {
                document.body.classList.remove('active');
            }
        };
        document.addEventListener("DOMContentLoaded", function () {
            async function fetchTickerData() {
                try {
                    const response = await fetch('http://localhost:8080/api/ticker');
                    const data = await response.json();

                    const tableBody = document.querySelector('#tickerDataBody');
                    tableBody.innerHTML = '';

                    data.forEach((ticker, index) => {
                        const row = document.createElement('tr');
                        row.classList.add('table')
                        row.innerHTML = `
                            <td>${index + 1}</td>
                            <td>${ticker.name}</td>
                            <td>${ticker.last}</td>
                            <td>${ticker.buy} / ${ticker.sell}</td>
                            <td>${ticker.volume}</td>
                            <td>${ticker.base_unit}</td>
                        `;
                        tableBody.appendChild(row);
                    });
                } catch (error) {
                    console.error('Error fetching ticker data:', error.message);
                }
            }
            fetchTickerData();

            const countElement = document.getElementById("count");
            const progressBarPath = document.querySelector(".CircularProgressbar-path");

            function startCounting(durationInSeconds) {
                let count = durationInSeconds;
                const interval = 1000; // 1 second interval
                const initialDashoffset = 289.027;
                function updateProgressBar() {
                    const progress = ((durationInSeconds - count) / durationInSeconds) * 100;
                    const dashoffset = (progress * initialDashoffset) / 100;
                    progressBarPath.style.strokeDashoffset = dashoffset;
                }

                function countdown() {
                    updateProgressBar();
                    count--;

                    if (count < 0) {
                        count = durationInSeconds; // Reset count to the initial duration
                    }

                    countElement.textContent = count;
                }

                // Initial setup
                countdown();
                updateProgressBar();

                // Start countdown and update every second
                const timer = setInterval(countdown, interval);

                return timer; // Return the timer so it can be cleared if needed
            }

            // Start counting backward from 60 seconds and keep repeating
            const countdownTimer = startCounting(60);
        });
    </script>
</body>

</html>